pipeline {
    agent any

    stages {
          stage('call to DSL Job') {
            steps {
            script {
            if (fileExists("JobListToExecute"))
       {
              echo 'Job List file found'
              readFile("JobListToExecute").split('\n').each { line, count -> def fields = line.split(',')
                           //  for(String item: fields) {
                                           println fields[1] + fields[2]

                             //              }
                             }
              } else {echo 'csv Not found. Failing.'}
              //build job: 'SeedJob', parameters: [[$class: 'StringParameterValue', name: 'param1', value: params.param1],[$class: 'StringParameterValue', name: 'param2', value: params.param2]]
            }
            }
        }
        
    }
}
